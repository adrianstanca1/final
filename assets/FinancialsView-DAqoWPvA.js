import{j as e,C as s,B as t,a}from"./index-D85gtc9V.js";import{r as l}from"./leaflet-QxLtkkBL.js";import{f as i}from"./finance-C6WgNQzT.js";import"./react-Z2Iecplj.js";import"./genai-DmvHCT3V.js";const c=({user:c,addToast:n})=>{const[d,r]=l.useState([]),[m,x]=l.useState([]),[o,h]=l.useState(!0);if(l.useEffect(()=>{(async()=>{try{const[e,s]=await Promise.all([a.getInvoices(),a.getExpenses()]);r(e),x(s)}catch(e){n("Failed to load financial data","error")}finally{h(!1)}})()},[n]),o)return e.jsx(s,{children:"Loading financials..."});const j=d.reduce((e,s)=>e+(s.amount||0),0),f=m.reduce((e,s)=>e+(s.amount||0),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Financials"}),e.jsx(t,{children:"Create Invoice"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:i(j,"USD")})]})}),e.jsx(s,{children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Expenses"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:i(f,"USD")})]})}),e.jsx(s,{children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Net Profit"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i(j-f,"USD")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(s,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Invoices"}),e.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Invoice #",s.number]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.status})]}),e.jsx("p",{className:"font-medium",children:i(s.amount||0,"USD")})]},s.id))})]})}),e.jsx(s,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Expenses"}),e.jsx("div",{className:"space-y-3",children:m.slice(0,5).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.description}),e.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),e.jsx("p",{className:"font-medium",children:i(s.amount||0,"USD")})]},s.id))})]})})]})]})};export{c as FinancialsView};
