import{j as e,C as s,B as t,a as l}from"./index-D85gtc9V.js";import{r as a}from"./leaflet-QxLtkkBL.js";import"./react-Z2Iecplj.js";import"./genai-DmvHCT3V.js";const c=({user:c,addToast:i,setActiveView:n})=>{const[r,d]=a.useState([]),[x,m]=a.useState([]),[h,o]=a.useState(!0);if(a.useEffect(()=>{(async()=>{try{const[e,s]=await Promise.all([l.getClients(),l.getProjects()]);d(e),m(s)}catch(e){i("Failed to load clients data","error")}finally{o(!1)}})()},[i]),h)return e.jsx(s,{children:"Loading clients..."});const j=r.filter(e=>"active"===e.status),N=r.filter(e=>"inactive"===e.status);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clients"}),e.jsx(t,{children:"Add Client"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Clients"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.length})]})}),e.jsx(s,{children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:j.length})]})}),e.jsx(s,{children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Inactive"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:N.length})]})})]}),e.jsx(s,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Client List"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Name"}),e.jsx("th",{className:"text-left py-2",children:"Company"}),e.jsx("th",{className:"text-left py-2",children:"Email"}),e.jsx("th",{className:"text-left py-2",children:"Phone"}),e.jsx("th",{className:"text-left py-2",children:"Projects"}),e.jsx("th",{className:"text-left py-2",children:"Status"}),e.jsx("th",{className:"text-left py-2",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(s=>{const l=(a=s.id,x.filter(e=>e.clientId===a));var a;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3",children:s.name}),e.jsx("td",{className:"py-3",children:s.company}),e.jsx("td",{className:"py-3",children:s.email}),e.jsx("td",{className:"py-3",children:s.phone}),e.jsx("td",{className:"py-3",children:l.length}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("active"===s.status?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:s.status})}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(t,{variant:"secondary",size:"sm",children:"View"}),e.jsx(t,{variant:"secondary",size:"sm",children:"Edit"})]})})]},s.id)})})]})})]})}),e.jsx(s,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(s=>{const t=r.find(e=>e.id===s.clientId);return e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Client: ",t?.name||"Unknown"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:s.status}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]})]},s.id)})})]})})]})};export{c as ClientsView};
