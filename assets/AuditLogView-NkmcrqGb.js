import{j as e,C as t,B as s,a}from"./index-D85gtc9V.js";import{r as l}from"./leaflet-QxLtkkBL.js";import"./react-Z2Iecplj.js";import"./genai-DmvHCT3V.js";const c=({user:c,addToast:d})=>{const[i,r]=l.useState([]),[n,o]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const e=await(a.getAuditLogs?.())||[];r(e)}catch(e){d("Failed to load audit logs","error")}finally{o(!1)}})()},[d]);return n?e.jsx(t,{children:"Loading audit logs..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audit Logs"}),e.jsx(s,{onClick:()=>{const e="data:text/csv;charset=utf-8,"+i.map(e=>`${e.timestamp},${e.action},${e.userId||"System"}`).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","audit_logs.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:"Export CSV"})]}),e.jsx(t,{children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Timestamp"}),e.jsx("th",{className:"text-left py-2",children:"Action"}),e.jsx("th",{className:"text-left py-2",children:"User"}),e.jsx("th",{className:"text-left py-2",children:"Details"})]})}),e.jsxs("tbody",{children:[i.slice(0,100).map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:new Date(t.timestamp).toLocaleDateString()}),e.jsx("td",{className:"py-2",children:t.action}),e.jsx("td",{className:"py-2",children:t.userId||"System"}),e.jsx("td",{className:"py-2",children:t.details||"-"})]},t.id)),0===i.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-8 text-gray-500",children:"No audit logs found"})})]})]})})})})]})};export{c as AuditLogView};
